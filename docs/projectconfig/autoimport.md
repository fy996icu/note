---
title: 自动导入
toc: menu
order: 3
---

<BackTop></BackTop>

# 配置自动导入

## 自动导入组件

有时候我们在页面中会使用组件，每次都需要 `import HelloWorld from './src/components/HelloWorld.vue'` 这样的去导入，相当麻烦，但是我们可以借助插件来解决这个问题，即使我们不使用 `import` 也能直接使用组件。

```html
<template>
  <div>
    <HelloWorld msg="Hello Vue 3.0 + Vite" />
  </div>
</template>

<script>
import HelloWorld from './src/components/HelloWorld.vue'

export default {
  name: 'App',
  components: {
    HelloWorld
  }
}
</script>
```

### 介绍插件

[unplugin-vue-components](https://www.npmjs.com/package/unplugin-vue-components) 是由 Vue 官方人员开发的一款自动引入插件，可以省去比如 UI 库的大量 `import` 语句。

### 安装插件

```bash
# npm
npm i unplugin-vue-components -D

# yarn
yarn add unplugin-vue-components -D

# pnpm
pnpm add unplugin-vue-components -D
```

### 支持UI库

- [Ant Design Vue](https://www.antdv.com/docs/vue/introduce-cn)
- [Arco Design Vue](https://arco.design/vue/docs/start)
- [BootstrapVue](https://bootstrap-vue.org/)
- [Element Plus](https://element-plus.gitee.io/zh-CN/)
- [Element UI](https://element.eleme.cn/#/zh-CN)
- [Headless UI](https://headlessui.com/)
- [IDux](https://idux.site/)
- [Inkline](https://www.inkline.io/)
- [Ionic](https://ionicframework.com/)
- [Naive UI](https://www.naiveui.com/zh-CN/os-theme)
- [Prime Vue](http://primefaces.org/primevue/)
- [Quasar](http://www.quasarchs.com/)
- [TDesign](https://tdesign.tencent.com/)
- [Vant](https://vant-contrib.gitee.io/vant/#/zh-CN)
- [Varlet UI](https://varlet.gitee.io/varlet-ui/#/zh-CN/index)
- [VEUI](https://veui.dev/)
- [View UI](https://www.iviewui.com/)
- [Vuetify](https://vuetify.cn/zh-Hans/)
- [VueUse Components](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/vueuse.ts)
- [VueUse Directives](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/vueuse-directive.ts)
- [Dev UI](https://devui.design/)

### 配置插件

因为我喜欢用 [Ant Design of Vue](https://www.antdv.com/docs/vue/introduce-cn)，所以用它来举例。

在根目录下创建 `types` 目录，用于存放类型申明文件，并配置 `vite.config.ts`：

```ts
import { fileURLToPath, URL } from 'node:url'

import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import vueJsx from '@vitejs/plugin-vue-jsx'

// 自动导入插件
import Components from 'unplugin-vue-components/vite'

// 导入对应的 UI 解析器，这里导入的是 AntDesignVue组件库的解析器
import { AntDesignVueResolver } from 'unplugin-vue-components/resolvers'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    vue(),
    vueJsx(),
    // 自动导入组件
    Components({
      // 配置需要默认导入的自定义组件文件夹，该文件夹下的所有组件都会自动 import
      dirs: ['src/components'],
      // 指定类型声明文件，为true时在项目根目录创建
      dts: 'types/components.d.ts',
      // 组件名称包含目录，防止同名组件冲突
      directoryAsNamespace: true,
      // 解析器
      resolvers: [
        AntDesignVueResolver({
          // 是否需要自动引入加载对应的组件样式
          importStyle: 'less',
          // 自动引入 ant-design/icons-vue中的图标，需要安装@ant-design/icons-vue
          resolveIcons: true,
        }),
      ],
    }),
  ],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url)),
    },
  },
  // 配置less
  css: {
    preprocessorOptions: {
      less: {
        javascriptEnabled: true,
        modifyVars: {
          '@primary-color': '#4569D4', // 设置antd主题色
        },
      },
    },
  },
})
```

配置完成后我们重新启动一下项目会看到在 `types` 目录下多了一个 `components.d.ts` 类型申明文件：

```ts
// generated by unplugin-vue-components
// We suggest you to commit this file into source control
// Read more: https://github.com/vuejs/core/pull/3399
import '@vue/runtime-core'

export {}

declare module '@vue/runtime-core' {
  export interface GlobalComponents {
    HelloWorld: typeof import('./../components/HelloWorld.vue')['default']
    IconsIconCommunity: typeof import('./../components/icons/IconCommunity.vue')['default']
    IconsIconDocumentation: typeof import('./../components/icons/IconDocumentation.vue')['default']
    IconsIconEcosystem: typeof import('./../components/icons/IconEcosystem.vue')['default']
    IconsIconSupport: typeof import('./../components/icons/IconSupport.vue')['default']
    IconsIconTooling: typeof import('./../components/icons/IconTooling.vue')['default']
    RouterLink: typeof import('vue-router')['RouterLink']
    RouterView: typeof import('vue-router')['RouterView']
    TheWelcome: typeof import('./../components/TheWelcome.vue')['default']
    WelcomeItem: typeof import('./../components/WelcomeItem.vue')['default']
  }
}
```

这样我们在页面上用到的组件都会被自动导入了。

查看 `HomeView.vue` 页面：

```html
<script setup lang="ts">
import TheWelcome from '../components/TheWelcome.vue'
</script>

<template>
  <main>
    <TheWelcome />
  </main>
</template>
```
![img](https://cdn.jsdelivr.net/gh/fy996icu/pics/img/vue3_config_auto.png)

我们去掉 `import TheWelcome from '../components/TheWelcome.vue'` 试试：发现不需要我们自己手动引入 `TheWelcome` 组件也可以正常使用。

```html
<script setup lang="ts"></script>

<template>
  <main>
    <TheWelcome />
  </main>
</template>
```

![img](https://cdn.jsdelivr.net/gh/fy996icu/pics/img/vue3_config_auto.png)

### 使用组件

我们试试 `AntDesignVue` 的组件：`HomeView.vue` 页面添加 `a-button` 按钮组件，并且不使用 `import` 的方法导入。

```html
<!-- HomeView.vue -->

<script setup lang="ts"></script>

<template>
  <main>
    <TheWelcome />
    <a-button type="primary">Primary Button</a-button>
    <a-button>Default Button</a-button>
    <a-button type="dashed">Dashed Button</a-button>
    <a-button type="text">Text Button</a-button>
    <a-button type="link">Link Button</a-button>
  </main>
</template>
```

在浏览器页面中我们发现 `a-button` 按钮正常显示：

![img](https://cdn.jsdelivr.net/gh/fy996icu/pics/img/vue3_config_button.png)


查看 `types/components.d.ts` 文件：

```ts
// generated by unplugin-vue-components
// We suggest you to commit this file into source control
// Read more: https://github.com/vuejs/core/pull/3399
import '@vue/runtime-core'

export {}

declare module '@vue/runtime-core' {
  export interface GlobalComponents {
    AButton: typeof import('ant-design-vue/es')['Button']
    HelloWorld: typeof import('./../components/HelloWorld.vue')['default']
    IconsIconCommunity: typeof import('./../components/icons/IconCommunity.vue')['default']
    IconsIconDocumentation: typeof import('./../components/icons/IconDocumentation.vue')['default']
    IconsIconEcosystem: typeof import('./../components/icons/IconEcosystem.vue')['default']
    IconsIconSupport: typeof import('./../components/icons/IconSupport.vue')['default']
    IconsIconTooling: typeof import('./../components/icons/IconTooling.vue')['default']
    RouterLink: typeof import('vue-router')['RouterLink']
    RouterView: typeof import('vue-router')['RouterView']
    TheWelcome: typeof import('./../components/TheWelcome.vue')['default']
    WelcomeItem: typeof import('./../components/WelcomeItem.vue')['default']
  }
}
```

插件自动将 `a-button` 按钮给我们导入了： `AButton: typeof import('ant-design-vue/es')['Button']`。

## 自动导入 API

### 介绍插件

[unplugin-auto-import](https://www.npmjs.com/package/unplugin-auto-import) 解决了 `vue3-hook`、`vue-router`、`useVue` 等多个插件的自动导入，也支持自定义插件的自动导入，是一个功能强大的 `TypeScript` 支持工具。

### 安装插件

```bash
# npm
npm i unplugin-auto-import -D

# yarn
yarn add unplugin-auto-import -D

# pnpm
pnpm add unplugin-auto-import -D
```

### 配置插件

配置 `vite.config.ts`：

```ts
import { fileURLToPath, URL } from 'node:url'

import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import vueJsx from '@vitejs/plugin-vue-jsx'

// 自动导入插件
import Components from 'unplugin-vue-components/vite'

// 导入对应的 UI 解析器，这里导入的是 AntDesignVue组件库的解析器
import { AntDesignVueResolver } from 'unplugin-vue-components/resolvers'

// 自动导入 api
import AutoImport from 'unplugin-auto-import/vite'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    vue(),
    vueJsx(),
    // 自动导入组件
    Components({
      // 配置需要默认导入的自定义组件文件夹，该文件夹下的所有组件都会自动 import
      dirs: ['src/components'],
      // 指定类型声明文件，为true时在项目根目录创建
      dts: 'types/components.d.ts',
      // 组件名称包含目录，防止同名组件冲突
      directoryAsNamespace: true,
      // 解析器
      resolvers: [
        AntDesignVueResolver({
          // 是否需要自动引入加载对应的组件样式
          importStyle: 'less',
          // 自动引入 ant-design/icons-vue中的图标，需要安装@ant-design/icons-vue
          resolveIcons: true,
        }),
      ],
    }),
    // 自动导入 api
    AutoImport({
      // 目标文件
      include: [
        /\.[tj]sx?$/, // .ts, .tsx, .js, .jsx
        /\.vue$/,
        /\.vue\?vue/, // .vue
        /\.md$/, // .md
      ],
      // 全局导入的插件
      imports: [
        // 预设
        'vue',
        'vue-router',
        // 自定义插件-根据自己需求配置
        {
          '@vueuse/core': [
            // named imports
            'useMouse', // import { useMouse } from '@vueuse/core',
            // alias
            ['useFetch', 'useMyFetch'], // import { useFetch as useMyFetch } from '@vueuse/core',
          ],
          axios: [
            // default imports
            ['default', 'axios'], // import { default as axios } from 'axios',
          ],
        },
      ],
      // 在Vue模板内自动导入
      vueTemplate: false,
      // 自定义解析器, 与unplugin-vue-components兼容，例如：AntDesignVueResolver
      resolvers: [],
      // 自动导入目录下的模块——配置目录
      dirs: [],
      // 声明文件生成位置和文件名称，为true时在项目根目录自动创建
      dts: 'types/auto-imports.d.ts',
      // eslint报错解决
      eslintrc: {
        // 此处为true运行后会生成.eslintrc-auto-import.json文件
        enabled: true, // 此处第一次运行使用true,之后改为false
        filepath: './.eslintrc-auto-import.json', // Default `./.eslintrc-auto-import.json`
        globalsPropValue: true,
      },
    }),
  ],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url)),
    },
  },
  // 配置less
  css: {
    preprocessorOptions: {
      less: {
        javascriptEnabled: true,
        modifyVars: {
          '@primary-color': '#4569D4', // 设置antd主题色
        },
      },
    },
  },
})
```

配置完成后记得重启项目，然后我们查看 `types` 文件夹，里面自动生成了 `auto-imports.d.ts` 文件：

```ts
// Generated by 'unplugin-auto-import'
export {}
declare global {
  const EffectScope: typeof import('vue')['EffectScope']
  const axios: typeof import('axios')['default']
  const computed: typeof import('vue')['computed']
  const createApp: typeof import('vue')['createApp']
  const customRef: typeof import('vue')['customRef']
  const defineAsyncComponent: typeof import('vue')['defineAsyncComponent']
  const defineComponent: typeof import('vue')['defineComponent']
  const effectScope: typeof import('vue')['effectScope']
  const getCurrentInstance: typeof import('vue')['getCurrentInstance']
  const getCurrentScope: typeof import('vue')['getCurrentScope']
  const h: typeof import('vue')['h']
  const inject: typeof import('vue')['inject']
  const isProxy: typeof import('vue')['isProxy']
  const isReactive: typeof import('vue')['isReactive']
  const isReadonly: typeof import('vue')['isReadonly']
  const isRef: typeof import('vue')['isRef']
  const markRaw: typeof import('vue')['markRaw']
  const nextTick: typeof import('vue')['nextTick']
  const onActivated: typeof import('vue')['onActivated']
  const onBeforeMount: typeof import('vue')['onBeforeMount']
  const onBeforeUnmount: typeof import('vue')['onBeforeUnmount']
  const onBeforeUpdate: typeof import('vue')['onBeforeUpdate']
  const onDeactivated: typeof import('vue')['onDeactivated']
  const onErrorCaptured: typeof import('vue')['onErrorCaptured']
  const onMounted: typeof import('vue')['onMounted']
  const onRenderTracked: typeof import('vue')['onRenderTracked']
  const onRenderTriggered: typeof import('vue')['onRenderTriggered']
  const onScopeDispose: typeof import('vue')['onScopeDispose']
  const onServerPrefetch: typeof import('vue')['onServerPrefetch']
  const onUnmounted: typeof import('vue')['onUnmounted']
  const onUpdated: typeof import('vue')['onUpdated']
  const provide: typeof import('vue')['provide']
  const reactive: typeof import('vue')['reactive']
  const readonly: typeof import('vue')['readonly']
  const ref: typeof import('vue')['ref']
  const resolveComponent: typeof import('vue')['resolveComponent']
  const shallowReactive: typeof import('vue')['shallowReactive']
  const shallowReadonly: typeof import('vue')['shallowReadonly']
  const shallowRef: typeof import('vue')['shallowRef']
  const toRaw: typeof import('vue')['toRaw']
  const toRef: typeof import('vue')['toRef']
  const toRefs: typeof import('vue')['toRefs']
  const triggerRef: typeof import('vue')['triggerRef']
  const unref: typeof import('vue')['unref']
  const useAttrs: typeof import('vue')['useAttrs']
  const useCssModule: typeof import('vue')['useCssModule']
  const useCssVars: typeof import('vue')['useCssVars']
  const useMouse: typeof import('@vueuse/core')['useMouse']
  const useMyFetch: typeof import('@vueuse/core')['useFetch']
  const useRoute: typeof import('vue-router')['useRoute']
  const useRouter: typeof import('vue-router')['useRouter']
  const useSlots: typeof import('vue')['useSlots']
  const watch: typeof import('vue')['watch']
  const watchEffect: typeof import('vue')['watchEffect']
  const watchPostEffect: typeof import('vue')['watchPostEffect']
  const watchSyncEffect: typeof import('vue')['watchSyncEffect']
}
```

### 使用方法

使用 `unplugin-auto-import` 插件后我们可以不用每次都 `import { computed, ref } from 'vue'` 这样导入 api 了，非常方便。

**使用该插件之前：**

```html
<script setup lang="ts">
// 导入 api
import { computed, ref } from 'vue'
const count = ref(10)
const doubled = computed(() => count.value * 2)
</script>

<template>
  <main>
    <h1>双倍数字：{{ doubled }}</h1>
  </main>
</template>
```

**使用该插件之后：**

```html
<script setup lang="ts">
const count = ref(10)
const doubled = computed(() => count.value * 2)
</script>

<template>
  <main>
    <h1>双倍数字：{{ doubled }}</h1>
  </main>
</template>
```

### ESLint 报错

如果遇到当前无效与 eslint 冲突，可以配置 `eslintrc`。

```ts
export default defineConfig({
  plugins: [
    vue(),
    vueJsx(),
    // 自动导入 api
    AutoImport({
      // 目标文件
      include: [
        /\.[tj]sx?$/, // .ts, .tsx, .js, .jsx
        /\.vue$/,
        /\.vue\?vue/, // .vue
        /\.md$/, // .md
      ],
      // 全局导入的插件
      imports: [
        // 预设
        'vue',
        'vue-router',
        // 自定义插件-根据自己需求配置
        {
          '@vueuse/core': [
            // named imports
            'useMouse', // import { useMouse } from '@vueuse/core',
            // alias
            ['useFetch', 'useMyFetch'], // import { useFetch as useMyFetch } from '@vueuse/core',
          ],
          axios: [
            // default imports
            ['default', 'axios'], // import { default as axios } from 'axios',
          ],
        },
      ],
      // 在Vue模板内自动导入
      vueTemplate: false,
      // 自定义解析器, 与unplugin-vue-components兼容，例如：AntDesignVueResolver
      resolvers: [],
      // 自动导入目录下的模块——配置目录
      dirs: [],
      // 声明文件生成位置和文件名称，为true时在项目根目录自动创建
      dts: 'types/auto-imports.d.ts',
      // eslint报错解决
      eslintrc: {
        // 此处为true运行后会生成.eslintrc-auto-import.json文件
        enabled: true, // 此处第一次运行使用true,之后改为false
        filepath: './.eslintrc-auto-import.json', // Default `./.eslintrc-auto-import.json`
        globalsPropValue: true,
      },
    }),
  ],
})
```

`eslintrc` 是用来解决 eslint 报错问题的配置项。当 `enabled` 为 `true` 时，会根据`filepath` 生成一个 eslint 的配置文件。这个文件需要引入到 eslint 的配置文件中，例如：

```js
// .eslintrc.js
module.exports = {
  extends: [
    ...
    './.eslintrc-auto-import.json'
  ]
}
```

在 `tsconfig.json` 文件中的 `include` 配置中添加 `auto-imports.d.ts` 或者 `types/**/*.ts`：

```json
{
  "extends": "@vue/tsconfig/tsconfig.web.json",
  "include": ["env.d.ts", "src/**/*", "src/**/*.vue", "types/**/*.ts"],
}
```

然后一定要记得重新启动项目，这样才会生成这个配置文件。配置完成后，eslint报错就会消失。

需要注意的是，一旦生成配置文件之后，最好把 `enable`关掉，即改成 `false` 。否则这个文件每次会在重新加载的时候重新生成，这会导致 eslint 有时会找不到这个文件。当需要更新配置文件的时候，再重新打开吧。


## 常见问题

### Less 报错

#### <Badge>Q</Badge>：如果 `vite.config.ts` 没有配置 less， 在配置 `AntDesignVueResolver({importStyle: 'less'})` 会 less 报错。

(1)、安装 less：

```bash
# npm
npm i less -D

# yarn
yarn add less -D

# pnpm
pnpm add less -D
```

(2)、在 `vite.config.ts` 配置 less：

```ts
import { fileURLToPath, URL } from 'node:url'

import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import vueJsx from '@vitejs/plugin-vue-jsx'

// 自动导入插件
import Components from 'unplugin-vue-components/vite'

// 导入对应的 UI 解析器，这里导入的是 AntDesignVue组件库的解析器
import { AntDesignVueResolver } from 'unplugin-vue-components/resolvers'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
  // 配置less
  css: {
    preprocessorOptions: {
      less: {
        javascriptEnabled: true,
        modifyVars: {
          '@primary-color': '#4569D4', // 设置antd主题色
        },
      },
    },
  },
})
```

### 类型提示失效

#### <Badge>Q</Badge>：配置好自动导入组件的后，能正常使用组件，但是类型提示和组件属性值提示失效了。

![img](https://cdn.jsdelivr.net/gh/fy996icu/pics/img/vue3-config-components.png)

**情况一：插件生成的 `components.d.ts` 类型声明文件未添加到 `tsconfig.json` 。**

在 `tsconfig.json` 文件中的 `include` 配置中添加 `types/components.d.ts` 或者 `types/**/*.ts`：

```json
{
  "extends": "@vue/tsconfig/tsconfig.web.json",
  "include": ["env.d.ts", "src/**/*", "src/**/*.vue", "types/**/*.ts"],
}
```

添加后再查看组件，类型提示和组件属性值提示就出现了：

![img](https://cdn.jsdelivr.net/gh/fy996icu/pics/img/vue3-config-props.png)

**情况二：`Vue Language Features (Volar)` 插件的版本过高，部分版本有 Bug。**

遇到这个问题只有试着更换 `Volar` 插件版本，亲测 [v1.0.0-rc.5](https://github.com/johnsoncodehk/volar/issues/1880) 这个版本有效，`1.0.8` 版本不行，我们可以去 GitHub 上去下载它的旧版本。[立即去下载](https://github.com/johnsoncodehk/volar/blob/master/CHANGELOG.md)


**情况三：类型声明文件配置了，`Volar` 插件正常，但是你的项目是 `pnpm` 创建的。**

出现这种情况可以试试 Github 上面 `unplugin-vue-components` 插件 issues 中的解决办法：[issues/406](https://github.com/antfu/unplugin-vue-components/issues/406)

>问题出现在自动生成的 `components.d.ts` 文件中的 `declare module '@vue/runtime-core'` 声明，在 `pnpm` 中只能访问项目的顶级依赖，而 `@vue/runtime-core` 是 `vue` 模块下的依赖，不是顶级依赖，导致声明语句失效。（yarn 和 npm 的 node_modules 平铺目录结构允许访问所有依赖）
>
>解决方案如下：
>
>`Volar` 同时也读取了 `vue` 模块中的 `GlobalComponents` 类型，如果你愿意手动维护 `components.d.ts` 文件，直接将声明改成 `declare module 'vue'` 即可。
>也可以直接引入 `pnpm add @vue/runtime-core -D` 依赖，让声明语句生效即可，但是要注意引入的依赖版本应该与 `vue` 的版本相同，声明语句才会生效在正确的模块。
>推荐直接修改 `.npmrc` 配置文件 `public-hoist-pattern[]=@vue/runtime-core` 将依赖提升至根目录，也可以设置 `shamefully-hoist=true` 将所有依赖都提升至根目录（不推荐）。


### 函数式组件无法自动导入

#### <Badge>Q</Badge>：不在 `template` 中的 UI 组件无法自动导入。

使用 `Message` 组件的时候不导入无法使用，会报错，`unplugin-vue-components` 插件只对 `template` 中使用的组件起作用。

```html
<script setup lang="ts">
const showTips = () => {
  // Ant Design Vue的 Message 组件
  message.success('操作成功！')
}
</script>

<template>
  <main>
    <a-button type="primary" @click="showTips">显示提示</a-button>
  </main>
</template>
```

![img](https://cdn.jsdelivr.net/gh/fy996icu/pics/img/vue3-issue-msg.png)

解决方法：

- 方法一：我们可以在页面中手动导入。

```html
<script setup lang="ts">
// 手动导入 message
import { message } from 'ant-design-vue/es'
// 需要导入 message 样式
import 'ant-design-vue/es/message/style/css'
const showTips = () => {
  // Ant Design Vue的 Message 组件
  message.success('操作成功！')
}
</script>

<template>
  <main>
    <a-button type="primary" @click="showTips">显示提示</a-button>
  </main>
</template>
```

- <Badge>不建议</Badge>方法二：挂载到全局使用。

在 Vue2 中可以使用 `Vue.prototype.$message = message`，但是在 Vue3 中不能使用，我们使用的是 `app.config.globalProperties.$message = message`，或者使用 `app.provide`：

使用 globalProperties：

```ts
// main.ts
// 导入 message
import { message } from 'ant-design-vue/es'
import 'ant-design-vue/es/message/style/css'
app.config.globalProperties.$message = message

// 组件中使用
let $message: any = null
onMounted(() => {
  $message = getCurrentInstance()?.appContext.config.globalProperties.$message
})

const showTips = () => {
  $message.success('操作成功')
}
```


使用 provide：

```ts
// main.ts
// 导入 message
import { message } from 'ant-design-vue/es'
import 'ant-design-vue/es/message/style/css'
app.provide('global', {
  $message: message
})

// 组件中
const { $message } = inject('global')
const showTips = () => {
  $message.success('操作成功')
}
```

- <Badge>推荐</Badge>方法三：借助 `unplugin-auto-import` 插件。

`unplugin-auto-import` 插件可以导入自定义插件的 api，我们可以使用它来导入 `message` 这样的函数式组件。

配置 `vite.config.ts` 文件，修改 `AutoImport` 的 `imports` 选项，添加 `'ant-design-vue/es': ['message']`：

```ts
// vite.config.ts

imports: [
  // 预设
  'vue',
  'vue-router',
  // 自定义插件-根据自己需求配置
  {
    axios: [
      // default imports
      ['default', 'axios'], // import { default as axios } from 'axios',
    ],
    // 添加 ant-design-vue 的 message 组件
    'ant-design-vue/es': ['message'],
  },
],
```

在 `main.ts` 中全局导入 `message` 组件样式：

```ts
// main.ts

// 导入 message 组件样式
import 'ant-design-vue/es/message/style/css'
```

在组件中就可以直接使用 `message` 组件了，但是 ESLint 会报错，提示 message 未定义，需要配置自动导入 api 插件 `AutoImport` 的 [eslintrc](/projectconfig/autoimport#eslint-报错) 选项，将 `enabled` 设置为 true，执行重启一下项目再设置成 false，根据自己情况看是否每次都重新设置为 false。[为什么 enabled 执行一次后要改回 false？](/projectconfig/autoimport#eslint-报错)

```ts
// vite.config.ts

// eslint报错解决
eslintrc: {
  // 此处为true运行后会生成.eslintrc-auto-import.json文件
  enabled: true, // 此处第一次运行使用true,之后改为false
  filepath: './.eslintrc-auto-import.json', // Default `./.eslintrc-auto-import.json`
  globalsPropValue: true,
},
```

组件中使用会有非常便捷完善的类型提示。

```html
<script setup lang="ts">
const showTips = () => message.success('操作成功')
</script>

<template>
  <main>
    <a-button type="primary" @click="showTips">显示提示</a-button>
  </main>
</template>
```

![img](https://cdn.jsdelivr.net/gh/fy996icu/pics/img/vue3-issue-pluginMsg.png)
