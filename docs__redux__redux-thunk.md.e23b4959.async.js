(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[55],{"5m/p":function(e,n,t){"use strict";t("4eJr");var a,r=t("3LgI"),c=t("qqnG"),l=t("XSw6"),s=t("q1tI"),o=t.n(s),i=t("vOnD"),d=i["a"].div(a||(a=Object(c["a"])(["\n  height: 40px;\n  width: 40px;\n  line-height: 40px;\n  border-radius: 40px;\n  color: #333;\n  background-color: #fff;\n  transition: color 0.3s;\n  text-align: center;\n  font-size: 22px;\n  box-shadow: 0 3px 6px -4px #0000001f, 0 6px 16px #00000014, 0 9px 28px 8px #0000000d;\n  &:hover {\n    color: #4569d4;\n  }\n"]))),u=()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(r["a"],{style:{right:"16px"}},o.a.createElement(d,null,o.a.createElement(l["a"],null))));n["a"]=u},"8T1Q":function(e,n,t){"use strict";t("fOrg"),t("+KLJ"),t("q1tI")},CVji:function(e,n,t){"use strict";t("+BJd");var a=t("mr32"),r=t("q1tI"),c=t.n(r),l=e=>c.a.createElement(c.a.Fragment,null,c.a.createElement(a["a"],{color:e.color?e.color:"red"},e.children));n["a"]=l},GZIB:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),r=t.n(a),c=t("dEAq"),l=(t("8T1Q"),t("5m/p")),s=(t("CVji"),t("lxxy"),t("H1Ra")),o=r.a.memo((e=>{e.demos;return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(l["a"],null),r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"redux-thunk"},r.a.createElement(c["AnchorLink"],{to:"#redux-thunk","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"redux-thunk"),r.a.createElement("p",null,r.a.createElement("code",null,"redux-thunk")," \u80fd\u8ba9\u6211\u4eec\u5728 Redux \u4e2d\u505a\u5f02\u6b65\u8bf7\u6c42\u3002"),r.a.createElement("h2",{id:"\u5b89\u88c5"},r.a.createElement(c["AnchorLink"],{to:"#\u5b89\u88c5","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u5b89\u88c5"),r.a.createElement(s["a"],{code:"$ yarn add redux-thunk",lang:"bash"}),r.a.createElement("h2",{id:"\u4f5c\u7528"},r.a.createElement(c["AnchorLink"],{to:"#\u4f5c\u7528","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u4f5c\u7528"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u5f02\u6b65\u6570\u636e\u65e2\u7136\u8981\u4fdd\u5b58\u5230 Redux \u4e2d, \u6240\u4ee5\u83b7\u53d6\u5f02\u6b65\u6570\u636e\u4e5f\u5e94\u8be5\u662f Redux \u7684\u4e00\u90e8\u5206\uff0c",r.a.createElement("code",null,"redux-thunk")," \u80fd\u5c06\u5f02\u6b65\u8bf7\u6c42\u5c01\u88c5\u5230 Redux \u4e2d\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b ",r.a.createElement("code",null,"dispatch")," \u53ea\u80fd\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6709\u4e86 ",r.a.createElement("code",null,"redux-thunk")," \u540e ",r.a.createElement("code",null,"dispatch")," \u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u901a\u8fc7 ",r.a.createElement("code",null,"dispatch")," \u6d3e\u53d1\u4e00\u4e2a\u51fd\u6570\u7684\u65f6\u5019\u80fd\u591f\u53bb\u6267\u884c\u8fd9\u4e2a\u51fd\u6570, \u800c\u4e0d\u662f\u6267\u884c ",r.a.createElement("code",null,"reducer")," \u51fd\u6570\u3002"))),r.a.createElement("h2",{id:"\u4f7f\u7528"},r.a.createElement(c["AnchorLink"],{to:"#\u4f7f\u7528","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u5728\u521b\u5efa ",r.a.createElement("code",null,"store")," \u65f6\u5e94\u7528 ",r.a.createElement("code",null,"redux-thunk")," \u4e2d\u95f4\u4ef6\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5728 ",r.a.createElement("code",null,"action")," \u4e2d\u83b7\u53d6\u7f51\u7edc\u6570\u636e\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5728\u7ec4\u4ef6\u4e2d\u6d3e\u53d1 ",r.a.createElement("code",null,"action"),"\u3002"))),r.a.createElement("h2",{id:"\u4fee\u6539-store"},r.a.createElement(c["AnchorLink"],{to:"#\u4fee\u6539-store","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u4fee\u6539 Store"),r.a.createElement("p",null,"\u5728 store \u4e2d\u5e94\u7528 ",r.a.createElement("code",null,"redux-thunk")," \u4e2d\u95f4\u4ef6\uff1a\u4fee\u6539 ",r.a.createElement("code",null,"store.js"),":"),r.a.createElement(s["a"],{code:"// redux/store.js\n\n// \u5f15\u5165createStore\uff0c\u4e13\u95e8\u7528\u4e8e\u521b\u5efaredux\u4e2d\u6700\u4e3a\u6838\u5fc3\u7684store\u5bf9\u8c61\nimport { createStore, applyMiddleware } from 'redux';\n\n// \u5f15\u5165\u6c47\u603b\u4e4b\u540e\u7684reducer\nimport reducers from './reducers';\n\n// \u5f15\u5165redux-thunk\uff0c\u7528\u4e8e\u652f\u6301\u5f02\u6b65action\nimport thunkMiddleware from 'redux-thunk';\n\n// \u66b4\u9732store-\u5e94\u7528redux-thunk\u4e2d\u95f4\u4ef6\nexport default createStore(reducers, applyMiddleware(thunkMiddleware));",lang:"js"}),r.a.createElement("p",null,r.a.createElement("code",null,"applyMiddleware")," \u5c31\u662f Redux \u7684\u4e00\u4e2a\u539f\u751f\u65b9\u6cd5\uff0c\u5c06\u6240\u6709\u4e2d\u95f4\u4ef6\u7ec4\u6210\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f9d\u6b21\u6267\u884c\u3002"),r.a.createElement("h2",{id:"\u4fee\u6539-action"},r.a.createElement(c["AnchorLink"],{to:"#\u4fee\u6539-action","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u4fee\u6539 Action"),r.a.createElement("p",null,"\u4fee\u6539 ",r.a.createElement("code",null,"redux/actions/user.js")," \u4e2d\u7684 ",r.a.createElement("code",null,"getUserListAsync")," \u51fd\u6570\uff0c\u6b64\u51fd\u6570\u4f1a\u5f97\u5230\u4e00\u4e2a ",r.a.createElement("code",null,"dispatch")," \u53c2\u6570\uff0c\u5728\u6570\u636e\u8bf7\u6c42\u6210\u529f\u7684\u56de\u8c03\u51fd\u6570\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u6d3e\u53d1\u540c\u6b65 action \u4efb\u52a1\u3002"),r.a.createElement(s["a"],{code:"// redux/actions/user.js\n\n// \u5bfc\u5165\u5e38\u91cf\nimport axios from 'axios';\nimport { SET_USER_LIST } from '../constants';\n\n// \u7528\u6237\u5217\u8868 Action\nexport const getUserList = (data) => ({\n  type: SET_USER_LIST,\n  data,\n});\n\n// \u5b9a\u4e49getUserListAsync\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u5e76\u6d3e\u53d1\u540c\u6b65action\u4efb\u52a1\nexport const getUserListAsync = (params) => (dispatch) => {\n  console.log('\u8bf7\u6c42\u53c2\u6570\uff1a', params); // \u8f93\u51fa\uff1a\u8bf7\u6c42\u53c2\u6570\uff1a {id: '001'}\n  const url = 'https://www.fastmock.site/mock/0fc924bcdbc5617b343b766236bc39aa/react/api/userList';\n  axios.get(url).then((res) => {\n    if (res.data.code === 200) {\n      // \u6d3e\u53d1\u540c\u6b65action\u4efb\u52a1\n      dispatch(getUserList(res.data.data));\n    }\n  });\n};",lang:"jsx"}),r.a.createElement("p",null,"\u5f53 ",r.a.createElement("code",null,"axios")," \u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u6210\u529f\u8fd4\u56de\u6570\u636e\u540e\u7acb\u5373\u4f7f\u7528 ",r.a.createElement("code",null,"dispatch")," \u6d3e\u53d1\u540c\u6b65 action \u4efb\u52a1\u3002"),r.a.createElement("h2",{id:"\u4fee\u6539\u7ec4\u4ef6"},r.a.createElement(c["AnchorLink"],{to:"#\u4fee\u6539\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u4fee\u6539\u7ec4\u4ef6"),r.a.createElement("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b ",r.a.createElement("code",null,"dispatch")," \u53ea\u80fd\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6709\u4e86 ",r.a.createElement("code",null,"redux-thunk")," \u540e ",r.a.createElement("code",null,"dispatch")," \u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u3002"),r.a.createElement(s["a"],{code:"// User \u7ec4\u4ef6\n\nimport React from 'react';\n\n// \u5bfc\u5165connect\nimport { connect } from 'react-redux';\n\n// \u5bfc\u5165 action\nimport { getUserListAsync } from '../../redux/actions/user';\n\nconst User = (props) => {\n  const { userList, getUserListHandler } = props;\n  console.log('\u7528\u6237\u5217\u8868:', userList);\n  return (\n    <div>\n      <h1>User\u7ec4\u4ef6-\u7528\u6237\u5217\u8868</h1>\n      <ul>\n        {userList.map((item) => (\n          <li key={item.id}>\n            \u59d3\u540d\uff1a{item.chineseName}\u2014\u2014 \u5e74\u9f84\uff1a{item.age}\u2014\u2014 \u57ce\u5e02\uff1a{item.city}\n          </li>\n        ))}\n      </ul>\n      <button onClick={getUserListHandler}>\u83b7\u53d6\u7528\u6237\u5217\u8868</button>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  const { user } = state;\n  return {\n    userList: user.userList,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    // \u5b9a\u4e49getUserListAsync\u8fd9\u4e2a\u5f02\u6b65action\uff0c\u5e76\u4e14\u662f\u4e00\u4e2a\u51fd\u6570\n    getUserListHandler() {\n      // \u4f7f\u7528 redux-thunk \u540e dispatch \u63a5\u6536\u7684\u662f\u4e00\u4e2a\u51fd\u6570\u5e76\u4f20\u9012\u53c2\u6570\n      dispatch(getUserListAsync({ id: '001' }));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(User);",lang:"jsx"}),r.a.createElement("p",null,"\u5f53\u6211\u4eec\u70b9\u51fb ",r.a.createElement("code",null,"\u83b7\u53d6\u7528\u6237\u5217\u8868")," \u6309\u94ae\u65f6\uff0c\u4f1a\u6b63\u5e38\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u83b7\u53d6\u5230\u7528\u6237\u5217\u8868\u6570\u636e\uff0c\u5e76\u6e32\u67d3\u9875\u9762\u3002"),r.a.createElement("p",null,r.a.createElement("img",{src:"https://cdn.jsdelivr.net/gh/fy996icu/pics/img/redux-thunk-01.png",alt:"img"})),r.a.createElement("h2",{id:"\u8bf7\u6c42\u6210\u529f\u56de\u8c03\u4e8b\u4ef6"},r.a.createElement(c["AnchorLink"],{to:"#\u8bf7\u6c42\u6210\u529f\u56de\u8c03\u4e8b\u4ef6","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u8bf7\u6c42\u6210\u529f\u56de\u8c03\u4e8b\u4ef6"),r.a.createElement("p",null,"\u56e0\u4e3a\u6211\u4eec\u5c06\u7f51\u7edc\u8bf7\u6c42\u5c01\u88c5\u5728 Redux \u4e2d\uff0c\u6211\u4eec\u5728\u7ec4\u4ef6\u4e2d\u5c31\u65e0\u6cd5\u77e5\u9053\u7f51\u7edc\u8bf7\u6c42\u4ec0\u65f6\u5019\u6210\u529f\uff0c\u5c31\u65e0\u6cd5\u6dfb\u52a0 loading \u6548\u679c\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u7684\u65b9\u5f0f\u77e5\u9053\u7f51\u7edc\u8bf7\u6c42\u6210\u529f\u7684\u65f6\u673a\u3002"),r.a.createElement("p",null,"\u5411 ",r.a.createElement("code",null,"getUserListAsync")," \u65b9\u6cd5\u4e2d\u4f20\u9012\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff1a",r.a.createElement("code",null,"dispatch(getUserListAsync(","{",' id: "001" ',"}",", callback));"),":"),r.a.createElement(s["a"],{code:"// redux/actions/user.js\n\n// \u5bfc\u5165\u5e38\u91cf\nimport axios from 'axios';\nimport { SET_USER_LIST } from '../constants';\n\n// \u7528\u6237\u5217\u8868 Action\nexport const getUserList = (data) => ({\n  type: SET_USER_LIST,\n  data,\n});\n\n// \u5b9a\u4e49getUserListAsync\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u5e76\u6d3e\u53d1\u540c\u6b65action\u4efb\u52a1\nexport const getUserListAsync = (params, callback) => (dispatch) => {\n  console.log('\u8bf7\u6c42\u53c2\u6570\uff1a', params); // \u8f93\u51fa\uff1a\u8bf7\u6c42\u53c2\u6570\uff1a {id: '001'}\n  const url = 'https://www.fastmock.site/mock/0fc924bcdbc5617b343b766236bc39aa/react/api/userList';\n  axios.get(url).then((res) => {\n    if (res.data.code === 200) {\n      callback(); // \u8bf7\u6c42\u6210\u529f\u5c31\u89e6\u53d1\u56de\u8c03\u4e8b\u4ef6\n      // \u6d3e\u53d1\u540c\u6b65action\u4efb\u52a1\n      dispatch(getUserList(res.data.data));\n    }\n  });\n};",lang:"jsx"}),r.a.createElement(s["a"],{code:"// User \u7ec4\u4ef6\n\nimport React from 'react';\n\n// \u5bfc\u5165connect\nimport { connect } from 'react-redux';\n\n// \u5bfc\u5165 action\nimport { getUserListAsync } from '../../redux/actions/user';\n\nconst User = (props) => {\n  const { userList, getUserListHandler } = props;\n  console.log('\u7528\u6237\u5217\u8868:', userList);\n\n  // \u83b7\u53d6\u7528\u6237\u6570\u636e\u7684\u70b9\u51fb\u4e8b\u4ef6\n  const getUserData = () => {\n    getUserListHandler(() => {\n      // \u8bf7\u6c42\u6210\u529f\uff0c\u56de\u8c03\u51fd\u6570\u88ab\u6267\u884c\n      console.log('\u83b7\u53d6\u7528\u6237\u6570\u636e\u6210\u529f');\n    });\n  };\n  return (\n    <div>\n      <h1>User\u7ec4\u4ef6-\u7528\u6237\u5217\u8868</h1>\n      <ul>\n        {userList.map((item) => (\n          <li key={item.id}>\n            \u59d3\u540d\uff1a{item.chineseName}\u2014\u2014 \u5e74\u9f84\uff1a{item.age}\u2014\u2014 \u57ce\u5e02\uff1a{item.city}\n          </li>\n        ))}\n      </ul>\n      <button onClick={getUserData}>\u83b7\u53d6\u7528\u6237\u5217\u8868</button>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  const { user } = state;\n  return {\n    userList: user.userList,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    // \u5b9a\u4e49getUserListAsync\u8fd9\u4e2a\u5f02\u6b65action\uff0c\u5e76\u4e14\u662f\u4e00\u4e2a\u51fd\u6570\n    getUserListHandler(callback) {\n      // \u4f7f\u7528 redux-thunk \u540e dispatch \u63a5\u6536\u7684\u662f\u4e00\u4e2a\u51fd\u6570\u5e76\u4f20\u9012\u53c2\u6570\n      dispatch(getUserListAsync({ id: '001' }, callback));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(User);",lang:"jsx"}),r.a.createElement("p",null,"\u4e8e\u662f\u4e4e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5728 ",r.a.createElement("code",null,"\u56de\u8c03\u51fd\u6570")," \u4e2d\u6dfb\u52a0 loading \u7b49\u6548\u679c\u4e86\u3002"))))}));n["default"]=e=>{var n=r.a.useContext(c["context"]),t=n.demos;return r.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&c["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),r.a.createElement(o,{demos:t})}},lxxy:function(e,n,t){"use strict";t("tU7J");var a=t("wFql");t("q1tI"),a["a"].Text}}]);